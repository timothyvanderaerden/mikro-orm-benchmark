# MikroORM 4 vs TypeORM benchmark

This benchmark is using SQLite 3, comparing CRUD operations on 10 000 entities.
To use other drivers, run `docker-compose up` first or adjust the configuration
in `perf.ts` file. 

## Running

```sh
# for mikro-orm 
cd mikro-orm
yarn
yarn start sqlite
yarn start mysql
yarn start mariadb
yarn start pg
yarn start mongo
cd ..

# for typeorm 
cd typeorm
yarn
yarn start
cd ..
```

## Results

Measured on MacBook Pro 15" 2018, 2,2 GHz 6 core Intel Core i7, 16 GB RAM

### MikroORM 4.1.0

#### SQLite

```
$ tsc && node --expose-gc perf sqlite
using sqlite driver, 10 rounds (+1 warm up), 10000 items
┌─────────┬────────────────────┬────────────────────┬────────────────────┬───────────────────┬────────────────────┐
│ (index) │        all         │        find        │       insert       │      update       │       remove       │
├─────────┼────────────────────┼────────────────────┼────────────────────┼───────────────────┼────────────────────┤
│   min   │ 216.86564300209284 │ 43.300829999148846 │ 60.35792099684477  │ 77.61356300115585 │ 28.919142000377178 │
│   avg   │ 232.87055759802462 │ 46.32837530001998  │ 70.59637359827757  │ 83.71949990019202 │ 32.22630879953503  │
│   max   │ 275.9551530107856  │  54.6859880015254  │ 101.25787800550461 │ 90.96762400120497 │ 39.46483799815178  │
└─────────┴────────────────────┴────────────────────┴────────────────────┴───────────────────┴────────────────────┘
```

#### MySQL

```
$ tsc && node --expose-gc perf mysql
using mysql driver, 10 rounds (+1 warm up), 10000 items
┌─────────┬───────────────────┬────────────────────┬────────────────────┬────────────────────┬────────────────────┐
│ (index) │        all        │        find        │       insert       │       update       │       remove       │
├─────────┼───────────────────┼────────────────────┼────────────────────┼────────────────────┼────────────────────┤
│   min   │ 466.3680760115385 │ 19.841187000274658 │ 131.01261000335217 │ 185.6245269998908  │ 116.69107200205326 │
│   avg   │ 488.6190033011138 │ 22.502532000094654 │ 147.1877012014389  │ 194.98819250017405 │ 123.94057759940624 │
│   max   │ 555.239390000701  │ 28.95194000005722  │ 194.9489939957857  │ 204.97112599760294 │ 134.43866900354624 │
└─────────┴───────────────────┴────────────────────┴────────────────────┴────────────────────┴────────────────────┘
```

#### MariaDB

```
$ tsc && node --expose-gc perf mariadb
using mariadb driver, 10 rounds (+1 warm up), 10000 items
┌─────────┬───────────────────┬────────────────────┬────────────────────┬────────────────────┬────────────────────┐
│ (index) │        all        │        find        │       insert       │       update       │       remove       │
├─────────┼───────────────────┼────────────────────┼────────────────────┼────────────────────┼────────────────────┤
│   min   │ 491.5024840012193 │ 20.32915499806404  │ 148.25541599839926 │ 203.36537600308657 │ 112.50105600059032 │
│   avg   │ 517.1528089992702 │ 23.280248000472785 │ 162.1620250992477  │ 214.9076728992164  │ 116.8028630003333  │
│   max   │ 575.7971160039306 │ 30.261068001389503 │ 199.14523199945688 │ 228.6821400001645  │ 121.34172200411558 │
└─────────┴───────────────────┴────────────────────┴────────────────────┴────────────────────┴────────────────────┘
```

#### PostgreSQL

```
$ tsc && node --expose-gc perf pg
using pg driver, 10 rounds (+1 warm up), 10000 items
┌─────────┬────────────────────┬────────────────────┬────────────────────┬────────────────────┬───────────────────┐
│ (index) │        all         │        find        │       insert       │       update       │      remove       │
├─────────┼────────────────────┼────────────────────┼────────────────────┼────────────────────┼───────────────────┤
│   min   │ 469.6671779975295  │ 28.560491003096104 │ 167.73885499686003 │ 176.11228599399328 │ 90.0791140049696  │
│   avg   │ 483.75874980017545 │ 30.50137630030513  │ 177.63302109912038 │ 180.4144336000085  │ 95.20991880074143 │
│   max   │  524.482957996428  │ 38.20976600050926  │ 210.23370499908924 │ 189.6629559993744  │ 99.6937540024519  │
└─────────┴────────────────────┴────────────────────┴────────────────────┴────────────────────┴───────────────────┘
```

#### MongoDB

```
$ tsc && node --expose-gc perf mongo
using mongo driver, 10 rounds (+1 warm up), 10000 items
┌─────────┬────────────────────┬───────────────────┬────────────────────┬────────────────────┬────────────────────┐
│ (index) │        all         │       find        │       insert       │       update       │       remove       │
├─────────┼────────────────────┼───────────────────┼────────────────────┼────────────────────┼────────────────────┤
│   min   │ 1682.9513860046864 │ 73.82524999976158 │ 151.63690599799156 │ 1264.8092369884253 │ 176.38981100916862 │
│   avg   │ 1707.3417262017726 │ 79.48654779940844 │ 166.1193612039089  │ 1279.9564541965724 │ 181.77936300188304 │
│   max   │ 1751.4472570121288 │ 86.84066300094128 │ 192.42268900573254 │ 1296.3535719960928 │ 188.4591239988804  │
└─────────┴────────────────────┴───────────────────┴────────────────────┴────────────────────┴────────────────────┘
```

## TypeORM 0.2.28

#### SQLite

```
$ tsc && node --expose-gc perf
┌─────────┬────────────────────┬───────────────────┬────────────────────┬────────────────────┬────────────────────┐
│ (index) │        all         │       find        │       insert       │       update       │       remove       │
├─────────┼────────────────────┼───────────────────┼────────────────────┼────────────────────┼────────────────────┤
│   min   │ 13131.161956001073 │ 61.57548899948597 │ 3020.5984300002456 │ 5234.162716001272  │  4804.70919900015  │
│   avg   │ 13303.172528300807 │ 64.07001790031791 │ 3063.0884948004036 │ 5317.4669320002195 │ 4858.547083599866  │
│   max   │ 13468.373252004385 │  69.436722997576  │ 3170.9548320025206 │ 5416.373204000294  │ 5017.7623269967735 │
└─────────┴────────────────────┴───────────────────┴────────────────────┴────────────────────┴────────────────────┘
```
